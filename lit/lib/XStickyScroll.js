export class XStickyScroll{constructor(t,e){this.host=t,this.scrollBarClass=e,this.init()}static topOffset(t){return t.getBoundingClientRect().top+pageYOffset}static bottomOffset(t){return t.getBoundingClientRect().bottom+pageYOffset}static insertNodeAfter(t,e){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}static updateScroll(t,e){return e.scrollLeft=t.scrollLeft}init(){this.onResize=()=>{this.fitScrollBar(),this.controlWithinArea()},this.onScroll=()=>{this.controlWithinArea(),this.fitScrollBar()},window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onResize,!1),this.onViewScroll=t=>{t.target===this.scrollView?XStickyScroll.updateScroll(this.scrollView,this.scrollbar):XStickyScroll.updateScroll(this.scrollbar,this.scrollView)},this.scrollView=this.host,this.scrollView.style.overflowY="hidden",this.scrollView.style.whiteSpace="pre",this.scrollbar=document.createElement("div"),this.scrollbar.className="sticky-scrollbar "+this.scrollBarClass,this.scrollbar.style.overflowX="auto",this.scrollbar.style.position="fixed",this.scrollbar.style.bottom="0",this.scrollbar.style.zIndex="999",this.fakeContent=document.createElement("div"),this.scrollbar.appendChild(this.fakeContent),this.fakeContent.className="fake-content",this.fakeContent.style.height="1px",XStickyScroll.insertNodeAfter(this.scrollbar,this.scrollView),this.scrollView.addEventListener("scroll",this.onViewScroll),this.scrollbar.addEventListener("scroll",this.onViewScroll),this.onResize()}controlWithinArea(){let t,e,l,s,o=0;this.scrollView&&(o=this.scrollView.offsetHeight-this.scrollView.clientHeight),t=XStickyScroll.topOffset(this.scrollbar),e=XStickyScroll.bottomOffset(this.scrollbar),l=XStickyScroll.topOffset(this.scrollView),s=XStickyScroll.bottomOffset(this.scrollView),console.log(),console.log(),console.log(),console.log("fakeScrollbarTopOffset="+t,"viewTopOffset="+l),console.log(),console.log("fakeScrollbarBottomOffset="+e,"viewBottomOffset="+s),console.log(),console.log("scrollBarWidth:",o),this.scrollbar.style.left=t-o>l&&e<s?"":"-9999999px"}fitScrollBar(){this.fakeContent&&this.scrollbar&&this.scrollView&&(this.fakeContent.style.width=this.scrollView.scrollWidth+"px",this.scrollbar.style.width=this.scrollView.offsetWidth+"px")}destroy(){if(this.fakeContent&&this.scrollbar&&this.scrollView){console.log("Killing DOM elements...");try{this.scrollView.removeEventListener("scroll",this.onViewScroll),this.scrollbar.removeEventListener("scroll",this.onViewScroll),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.scrollView.style.overflowY="",this.scrollView.style.whiteSpace="",this.scrollbar.remove(),this.fakeContent.remove(),delete this.scrollbar,delete this.fakeContent,console.log("Have killed DOM elements...")}catch(t){console.error(t)}}}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9YU3RpY2t5U2Nyb2xsLmpzIl0sIm5hbWVzIjpbIlhTdGlja3lTY3JvbGwiLCJbb2JqZWN0IE9iamVjdF0iLCJob3N0Iiwic2Nyb2xsQmFyQ2xhc3MiLCJ0aGlzIiwiaW5pdCIsImUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwYWdlWU9mZnNldCIsImJvdHRvbSIsIm5ld05vZGUiLCJyZWZlcmVuY2VOb2RlIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwic291cmNlIiwidGFyZ2V0Iiwic2Nyb2xsTGVmdCIsIm9uUmVzaXplIiwiZml0U2Nyb2xsQmFyIiwiY29udHJvbFdpdGhpbkFyZWEiLCJvblNjcm9sbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpZXdTY3JvbGwiLCJldiIsInNjcm9sbFZpZXciLCJ1cGRhdGVTY3JvbGwiLCJzY3JvbGxiYXIiLCJzdHlsZSIsIm92ZXJmbG93WSIsIndoaXRlU3BhY2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJvdmVyZmxvd1giLCJwb3NpdGlvbiIsInpJbmRleCIsImZha2VDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJoZWlnaHQiLCJpbnNlcnROb2RlQWZ0ZXIiLCJmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0IiwiZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldCIsInZpZXdUb3BPZmZzZXQiLCJ2aWV3Qm90dG9tT2Zmc2V0Iiwic2Nyb2xsQmFyV2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ0b3BPZmZzZXQiLCJib3R0b21PZmZzZXQiLCJjb25zb2xlIiwibG9nIiwibGVmdCIsIndpZHRoIiwic2Nyb2xsV2lkdGgiLCJvZmZzZXRXaWR0aCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJlcnIiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ik9BQU8sTUFBTUEsY0FDVEMsWUFBWUMsRUFBTUMsR0FD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R0FBSUcsS0FBS21DLGFBQWVuQyxLQUFLeUIsV0FBYXpCLEtBQUt1QixXQUFZLENBQ3ZEeUIsUUFBUUMsSUFBSSwyQkFDWixJQUNJakQsS0FBS3VCLFdBQVcrQixvQkFBb0IsU0FBVXRELEtBQUtxQixjQUNuRHJCLEtBQUt5QixVQUFVNkIsb0JBQW9CLFNBQVV0RCxLQUFLcUIsY0FDbERGLE9BQU9tQyxvQkFBb0IsU0FBVXRELEtBQUtrQixVQUMxQ0MsT0FBT21DLG9CQUFvQixTQUFVdEQsS0FBS2UsVUFDMUNmLEtBQUt1QixXQUFXRyxNQUFNQyxVQUFZLEdBQ2xDM0IsS0FBS3VCLFdBQVdHLE1BQU1FLFdBQWEsR0FDbkM1QixLQUFLeUIsVUFBVThCLFNBQ2Z2RCxLQUFLbUMsWUFBWW9CLGdCQUNWdkQsS0FBS3lCLGlCQUNMekIsS0FBS21DLFlBQ1phLFFBQVFDLElBQUksK0JBRWhCLE1BQU9PLEdBQ0hSLFFBQVFTLE1BQU1EIiwiZmlsZSI6ImxpYi9YU3RpY2t5U2Nyb2xsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFhTdGlja3lTY3JvbGwge1xuICAgIGNvbnN0cnVjdG9yKGhvc3QsIHNjcm9sbEJhckNsYXNzKSB7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMuc2Nyb2xsQmFyQ2xhc3MgPSBzY3JvbGxCYXJDbGFzcztcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIHN0YXRpYyB0b3BPZmZzZXQoZSkge1xuICAgICAgICByZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBwYWdlWU9mZnNldDtcbiAgICB9XG4gICAgc3RhdGljIGJvdHRvbU9mZnNldChlKSB7XG4gICAgICAgIHJldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSArIHBhZ2VZT2Zmc2V0O1xuICAgIH1cbiAgICBzdGF0aWMgaW5zZXJ0Tm9kZUFmdGVyKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUpIHtcbiAgICAgICAgaWYgKHJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHJlZmVyZW5jZU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZS5uZXh0U2libGluZyk7XG4gICAgfVxuICAgIHN0YXRpYyB1cGRhdGVTY3JvbGwoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5zY3JvbGxMZWZ0ID0gc291cmNlLnNjcm9sbExlZnQ7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub25SZXNpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpdFNjcm9sbEJhcigpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sV2l0aGluQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sV2l0aGluQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5maXRTY3JvbGxCYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplLCBmYWxzZSk7XG4gICAgICAgIHRoaXMub25WaWV3U2Nyb2xsID0gZXYgPT4ge1xuICAgICAgICAgICAgZXYudGFyZ2V0ID09PSB0aGlzLnNjcm9sbFZpZXcgP1xuICAgICAgICAgICAgICAgIFhTdGlja3lTY3JvbGwudXBkYXRlU2Nyb2xsKHRoaXMuc2Nyb2xsVmlldywgdGhpcy5zY3JvbGxiYXIpXG4gICAgICAgICAgICAgICAgOiBYU3RpY2t5U2Nyb2xsLnVwZGF0ZVNjcm9sbCh0aGlzLnNjcm9sbGJhciwgdGhpcy5zY3JvbGxWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3ID0gdGhpcy5ob3N0O1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcuc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZSc7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuY2xhc3NOYW1lID0gJ3N0aWNreS1zY3JvbGxiYXIgJyArIHRoaXMuc2Nyb2xsQmFyQ2xhc3M7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLm92ZXJmbG93WCA9ICdhdXRvJztcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLnpJbmRleCA9ICc5OTknO1xuICAgICAgICB0aGlzLmZha2VDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuYXBwZW5kQ2hpbGQodGhpcy5mYWtlQ29udGVudCk7XG4gICAgICAgIHRoaXMuZmFrZUNvbnRlbnQuY2xhc3NOYW1lID0gJ2Zha2UtY29udGVudCc7XG4gICAgICAgIHRoaXMuZmFrZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XG4gICAgICAgIFhTdGlja3lTY3JvbGwuaW5zZXJ0Tm9kZUFmdGVyKHRoaXMuc2Nyb2xsYmFyLCB0aGlzLnNjcm9sbFZpZXcpO1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblZpZXdTY3JvbGwpO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uVmlld1Njcm9sbCk7XG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcbiAgICB9XG4gICAgY29udHJvbFdpdGhpbkFyZWEoKSB7XG4gICAgICAgIGxldCBmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0O1xuICAgICAgICBsZXQgZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldDtcbiAgICAgICAgbGV0IHZpZXdUb3BPZmZzZXQ7XG4gICAgICAgIGxldCB2aWV3Qm90dG9tT2Zmc2V0O1xuICAgICAgICBsZXQgc2Nyb2xsQmFyV2lkdGggPSAwO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxWaWV3KSB7XG4gICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHRoaXMuc2Nyb2xsVmlldy5vZmZzZXRIZWlnaHQgLSB0aGlzLnNjcm9sbFZpZXcuY2xpZW50SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGZha2VTY3JvbGxiYXJUb3BPZmZzZXQgPSBYU3RpY2t5U2Nyb2xsLnRvcE9mZnNldCh0aGlzLnNjcm9sbGJhcik7XG4gICAgICAgIGZha2VTY3JvbGxiYXJCb3R0b21PZmZzZXQgPSBYU3RpY2t5U2Nyb2xsLmJvdHRvbU9mZnNldCh0aGlzLnNjcm9sbGJhcik7XG4gICAgICAgIHZpZXdUb3BPZmZzZXQgPSBYU3RpY2t5U2Nyb2xsLnRvcE9mZnNldCh0aGlzLnNjcm9sbFZpZXcpO1xuICAgICAgICB2aWV3Qm90dG9tT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC5ib3R0b21PZmZzZXQodGhpcy5zY3JvbGxWaWV3KTtcbiAgICAgICAgY29uc29sZS5sb2coKTtcbiAgICAgICAgY29uc29sZS5sb2coKTtcbiAgICAgICAgY29uc29sZS5sb2coKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0PVwiICsgZmFrZVNjcm9sbGJhclRvcE9mZnNldCwgXCJ2aWV3VG9wT2Zmc2V0PVwiICsgdmlld1RvcE9mZnNldCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldD1cIiArIGZha2VTY3JvbGxiYXJCb3R0b21PZmZzZXQsIFwidmlld0JvdHRvbU9mZnNldD1cIiArIHZpZXdCb3R0b21PZmZzZXQpO1xuICAgICAgICBjb25zb2xlLmxvZygpO1xuICAgICAgICBjb25zb2xlLmxvZyhcInNjcm9sbEJhcldpZHRoOlwiLCBzY3JvbGxCYXJXaWR0aCk7XG4gICAgICAgIGlmICgoZmFrZVNjcm9sbGJhclRvcE9mZnNldCAtIHNjcm9sbEJhcldpZHRoID4gdmlld1RvcE9mZnNldCkgJiYgZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldCA8IHZpZXdCb3R0b21PZmZzZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLmxlZnQgPSAnLTk5OTk5OTlweCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZml0U2Nyb2xsQmFyKCkge1xuICAgICAgICBpZiAodGhpcy5mYWtlQ29udGVudCAmJiB0aGlzLnNjcm9sbGJhciAmJiB0aGlzLnNjcm9sbFZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuZmFrZUNvbnRlbnQuc3R5bGUud2lkdGggPSB0aGlzLnNjcm9sbFZpZXcuc2Nyb2xsV2lkdGggKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUud2lkdGggPSB0aGlzLnNjcm9sbFZpZXcub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmZha2VDb250ZW50ICYmIHRoaXMuc2Nyb2xsYmFyICYmIHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJLaWxsaW5nIERPTSBlbGVtZW50cy4uLlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uVmlld1Njcm9sbCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnN0eWxlLm92ZXJmbG93WSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5zdHlsZS53aGl0ZVNwYWNlID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlQ29udGVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zY3JvbGxiYXI7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmFrZUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYXZlIGtpbGxlZCBET00gZWxlbWVudHMuLi5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl19
