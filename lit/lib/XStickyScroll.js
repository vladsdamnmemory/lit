export class XStickyScroll{constructor(t,e){this.host=t,this.scrollBarClass=e,this.init()}static topOffset(t){return t.getBoundingClientRect().top+pageYOffset}static bottomOffset(t){return t.getBoundingClientRect().bottom+pageYOffset}static insertNodeAfter(t,e){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)}static updateScroll(t,e){return e.scrollLeft=t.scrollLeft}init(){let t,e;e=66,this.onResize=()=>{this.fitScrollBar(),this.controlWithinArea()},this.onScroll=()=>{this.controlWithinArea(),this.fitScrollBar()},window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onResize,!1),this.onViewScroll=e=>{clearTimeout(t),e.target===this.scrollView?(this.scrollbar.removeEventListener("scroll",this.onViewScroll),XStickyScroll.updateScroll(this.scrollView,this.scrollbar),t=setTimeout(()=>{this.scrollbar.addEventListener("scroll",this.onViewScroll)},66)):(this.scrollView.removeEventListener("scroll",this.onViewScroll),XStickyScroll.updateScroll(this.scrollbar,this.scrollView),t=setTimeout(()=>{this.scrollView.addEventListener("scroll",this.onViewScroll)},66))},this.scrollView=this.host,this.scrollView.style.overflowY="hidden",this.scrollView.style.whiteSpace="pre",this.scrollbar=document.createElement("div"),this.scrollbar.className="sticky-scrollbar "+this.scrollBarClass,this.scrollbar.style.overflowX="auto",this.scrollbar.style.position="fixed",this.scrollbar.style.bottom="0",this.scrollbar.style.zIndex="999",this.fakeContent=document.createElement("div"),this.scrollbar.appendChild(this.fakeContent),this.fakeContent.className="fake-content",this.fakeContent.style.height="1px",XStickyScroll.insertNodeAfter(this.scrollbar,this.scrollView),this.scrollView.addEventListener("scroll",this.onViewScroll),this.scrollbar.addEventListener("scroll",this.onViewScroll),this.onResize()}controlWithinArea(){let t,e,l,s,i;i=0,this.scrollView&&(i=this.scrollView.offsetHeight-this.scrollView.clientHeight),t=XStickyScroll.topOffset(this.scrollbar),e=XStickyScroll.bottomOffset(this.scrollbar),l=XStickyScroll.topOffset(this.scrollView),s=XStickyScroll.bottomOffset(this.scrollView),this.scrollbar.style.left=t-i>l&&e<s?"":"-9999999px"}fitScrollBar(){this.fakeContent&&this.scrollbar&&this.scrollView&&(this.fakeContent.style.width=this.scrollView.scrollWidth+"px",this.scrollbar.style.width=this.scrollView.offsetWidth+"px")}destroy(){if(this.fakeContent&&this.scrollbar&&this.scrollView)try{this.scrollView.removeEventListener("scroll",this.onViewScroll),this.scrollbar.removeEventListener("scroll",this.onViewScroll),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.scrollView.style.overflowY="",this.scrollView.style.whiteSpace="",this.scrollbar.remove(),this.fakeContent.remove(),delete this.scrollbar,delete this.fakeContent,console.log("Have removed DOM elements...")}catch(t){console.error(t)}}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9YU3RpY2t5U2Nyb2xsLmpzIl0sIm5hbWVzIjpbIlhTdGlja3lTY3JvbGwiLCJbb2JqZWN0IE9iamVjdF0iLCJob3N0Iiwic2Nyb2xsQmFyQ2xhc3MiLCJ0aGlzIiwiaW5pdCIsImUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwYWdlWU9mZnNldCIsImJvdHRvbSIsIm5ld05vZGUiLCJyZWZlcmVuY2VOb2RlIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwic291cmNlIiwidGFyZ2V0Iiwic2Nyb2xsTGVmdCIsInRpbWVyIiwidGltZW91dCIsIm9uUmVzaXplIiwiZml0U2Nyb2xsQmFyIiwiY29udHJvbFdpdGhpbkFyZWEiLCJvblNjcm9sbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpZXdTY3JvbGwiLCJldiIsImNsZWFyVGltZW91dCIsInNjcm9sbFZpZXciLCJzY3JvbGxiYXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidXBkYXRlU2Nyb2xsIiwic2V0VGltZW91dCIsInN0eWxlIiwib3ZlcmZsb3dZIiwid2hpdGVTcGFjZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm92ZXJmbG93WCIsInBvc2l0aW9uIiwiekluZGV4IiwiZmFrZUNvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImhlaWdodCIsImluc2VydE5vZGVBZnRlciIsImZha2VTY3JvbGxiYXJUb3BPZmZzZXQiLCJmYWtlU2Nyb2xsYmFyQm90dG9tT2Zmc2V0Iiwidmlld1RvcE9mZnNldCIsInZpZXdCb3R0b21PZmZzZXQiLCJzY3JvbGxCYXJXaWR0aCIsIm9mZnNldEhlaWdodCIsImNsaWVudEhlaWdodCIsInRvcE9mZnNldCIsImJvdHRvbU9mZnNldCIsImxlZnQiLCJ3aWR0aCIsInNjcm9sbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3Ii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S3dDLGFBQWV4QyxLQUFLMkIsV0FBYTNCLEtBQUswQixhQUMzQzFCLEtBQUt3QyxZQUFZVCxNQUFNdUIsTUFBUXRELEtBQUswQixXQUFXNkIsWUFBYyxLQUM3RHZELEtBQUsyQixVQUFVSSxNQUFNdUIsTUFBUXRELEtBQUswQixXQUFXOEIsWUFBYyxNQUduRTNELFVBQ0ksR0FBSUcsS0FBS3dDLGFBQWV4QyxLQUFLMkIsV0FBYTNCLEtBQUswQixXQUMzQyxJQUNJMUIsS0FBSzBCLFdBQVdFLG9CQUFvQixTQUFVNUIsS0FBS3VCLGNBQ25EdkIsS0FBSzJCLFVBQVVDLG9CQUFvQixTQUFVNUIsS0FBS3VCLGNBQ2xERixPQUFPTyxvQkFBb0IsU0FBVTVCLEtBQUtvQixVQUMxQ0MsT0FBT08sb0JBQW9CLFNBQVU1QixLQUFLaUIsVUFDMUNqQixLQUFLMEIsV0FBV0ssTUFBTUMsVUFBWSxHQUNsQ2hDLEtBQUswQixXQUFXSyxNQUFNRSxXQUFhLEdBQ25DakMsS0FBSzJCLFVBQVU4QixTQUNmekQsS0FBS3dDLFlBQVlpQixnQkFDVnpELEtBQUsyQixpQkFDTDNCLEtBQUt3QyxZQUNaa0IsUUFBUUMsSUFBSSxnQ0FFaEIsTUFBT0MsR0FDSEYsUUFBUUcsTUFBTUQiLCJmaWxlIjoibGliL1hTdGlja3lTY3JvbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgWFN0aWNreVNjcm9sbCB7XG4gICAgY29uc3RydWN0b3IoaG9zdCwgc2Nyb2xsQmFyQ2xhc3MpIHtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJDbGFzcyA9IHNjcm9sbEJhckNsYXNzO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgc3RhdGljIHRvcE9mZnNldChlKSB7XG4gICAgICAgIHJldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHBhZ2VZT2Zmc2V0O1xuICAgIH1cbiAgICBzdGF0aWMgYm90dG9tT2Zmc2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgcGFnZVlPZmZzZXQ7XG4gICAgfVxuICAgIHN0YXRpYyBpbnNlcnROb2RlQWZ0ZXIobmV3Tm9kZSwgcmVmZXJlbmNlTm9kZSkge1xuICAgICAgICBpZiAocmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlKVxuICAgICAgICAgICAgcmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdOb2RlLCByZWZlcmVuY2VOb2RlLm5leHRTaWJsaW5nKTtcbiAgICB9XG4gICAgc3RhdGljIHVwZGF0ZVNjcm9sbChzb3VyY2UsIHRhcmdldCkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0LnNjcm9sbExlZnQgPSBzb3VyY2Uuc2Nyb2xsTGVmdDtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgbGV0IHRpbWVyLCB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0ID0gNjY7XG4gICAgICAgIHRoaXMub25SZXNpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpdFNjcm9sbEJhcigpO1xuICAgICAgICAgICAgdGhpcy5jb250cm9sV2l0aGluQXJlYSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sV2l0aGluQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5maXRTY3JvbGxCYXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplLCBmYWxzZSk7XG4gICAgICAgIHRoaXMub25WaWV3U2Nyb2xsID0gZXYgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgICAgICAgICBYU3RpY2t5U2Nyb2xsLnVwZGF0ZVNjcm9sbCh0aGlzLnNjcm9sbFZpZXcsIHRoaXMuc2Nyb2xsYmFyKTtcbiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uVmlld1Njcm9sbCk7XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblZpZXdTY3JvbGwpO1xuICAgICAgICAgICAgICAgIFhTdGlja3lTY3JvbGwudXBkYXRlU2Nyb2xsKHRoaXMuc2Nyb2xsYmFyLCB0aGlzLnNjcm9sbFZpZXcpO1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uVmlld1Njcm9sbCk7XG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldyA9IHRoaXMuaG9zdDtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUnO1xuICAgICAgICB0aGlzLnNjcm9sbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLmNsYXNzTmFtZSA9ICdzdGlja3ktc2Nyb2xsYmFyICcgKyB0aGlzLnNjcm9sbEJhckNsYXNzO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5zdHlsZS5vdmVyZmxvd1ggPSAnYXV0byc7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUuYm90dG9tID0gJzAnO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5zdHlsZS56SW5kZXggPSAnOTk5JztcbiAgICAgICAgdGhpcy5mYWtlQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLmFwcGVuZENoaWxkKHRoaXMuZmFrZUNvbnRlbnQpO1xuICAgICAgICB0aGlzLmZha2VDb250ZW50LmNsYXNzTmFtZSA9ICdmYWtlLWNvbnRlbnQnO1xuICAgICAgICB0aGlzLmZha2VDb250ZW50LnN0eWxlLmhlaWdodCA9ICcxcHgnO1xuICAgICAgICBYU3RpY2t5U2Nyb2xsLmluc2VydE5vZGVBZnRlcih0aGlzLnNjcm9sbGJhciwgdGhpcy5zY3JvbGxWaWV3KTtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblZpZXdTY3JvbGwpO1xuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuICAgIGNvbnRyb2xXaXRoaW5BcmVhKCkge1xuICAgICAgICBsZXQgZmFrZVNjcm9sbGJhclRvcE9mZnNldCwgZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldCwgdmlld1RvcE9mZnNldCwgdmlld0JvdHRvbU9mZnNldCwgc2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgIHNjcm9sbEJhcldpZHRoID0gMDtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSB0aGlzLnNjcm9sbFZpZXcub2Zmc2V0SGVpZ2h0IC0gdGhpcy5zY3JvbGxWaWV3LmNsaWVudEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC50b3BPZmZzZXQodGhpcy5zY3JvbGxiYXIpO1xuICAgICAgICBmYWtlU2Nyb2xsYmFyQm90dG9tT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC5ib3R0b21PZmZzZXQodGhpcy5zY3JvbGxiYXIpO1xuICAgICAgICB2aWV3VG9wT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC50b3BPZmZzZXQodGhpcy5zY3JvbGxWaWV3KTtcbiAgICAgICAgdmlld0JvdHRvbU9mZnNldCA9IFhTdGlja3lTY3JvbGwuYm90dG9tT2Zmc2V0KHRoaXMuc2Nyb2xsVmlldyk7XG4gICAgICAgIGlmICgoZmFrZVNjcm9sbGJhclRvcE9mZnNldCAtIHNjcm9sbEJhcldpZHRoID4gdmlld1RvcE9mZnNldCkgJiYgZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldCA8IHZpZXdCb3R0b21PZmZzZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLmxlZnQgPSAnLTk5OTk5OTlweCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZml0U2Nyb2xsQmFyKCkge1xuICAgICAgICBpZiAodGhpcy5mYWtlQ29udGVudCAmJiB0aGlzLnNjcm9sbGJhciAmJiB0aGlzLnNjcm9sbFZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuZmFrZUNvbnRlbnQuc3R5bGUud2lkdGggPSB0aGlzLnNjcm9sbFZpZXcuc2Nyb2xsV2lkdGggKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUud2lkdGggPSB0aGlzLnNjcm9sbFZpZXcub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmZha2VDb250ZW50ICYmIHRoaXMuc2Nyb2xsYmFyICYmIHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblZpZXdTY3JvbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuc3R5bGUub3ZlcmZsb3dZID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnN0eWxlLndoaXRlU3BhY2UgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VDb250ZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNjcm9sbGJhcjtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5mYWtlQ29udGVudDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhhdmUgcmVtb3ZlZCBET00gZWxlbWVudHMuLi5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl19
