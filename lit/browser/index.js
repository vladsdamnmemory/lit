var lit=function(e){var t={};function o(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportWatcher=t.XStickyScroll=void 0;var r=o(1);Object.defineProperty(t,"XStickyScroll",{enumerable:!0,get:function(){return r.XStickyScroll}});var i=o(2);Object.defineProperty(t,"ViewportWatcher",{enumerable:!0,get:function(){return i.ViewportWatcher}})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XStickyScroll=void 0;var r=function(){function e(e,t){this.host=e,this.scrollBarClass=t,this.init()}return e.topOffset=function(e){return e.getBoundingClientRect().top+pageYOffset},e.bottomOffset=function(e){return e.getBoundingClientRect().bottom+pageYOffset},e.insertNodeAfter=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},e.updateScroll=function(e,t){return t.scrollLeft=e.scrollLeft},e.prototype.init=function(){var t=this;this.onResize=function(){t.fitScrollBar(),t.controlWithinArea()},this.onScroll=function(){t.controlWithinArea(),t.fitScrollBar()},window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onResize,!1),this.onViewScroll=function(o){o.target===t.scrollView?e.updateScroll(t.scrollView,t.scrollbar):e.updateScroll(t.scrollbar,t.scrollView)},this.scrollView=this.host,this.scrollView.style.overflowY="hidden",this.scrollView.style.whiteSpace="pre",this.scrollbar=document.createElement("div"),this.scrollbar.className="sticky-scrollbar "+this.scrollBarClass,this.scrollbar.style.overflowX="auto",this.scrollbar.style.position="fixed",this.scrollbar.style.bottom="0",this.scrollbar.style.zIndex="999",this.fakeContent=document.createElement("div"),this.scrollbar.appendChild(this.fakeContent),this.fakeContent.className="fake-content",this.fakeContent.style.height="1px",e.insertNodeAfter(this.scrollbar,this.scrollView),this.scrollView.addEventListener("scroll",this.onViewScroll),this.scrollbar.addEventListener("scroll",this.onViewScroll),this.onResize()},e.prototype.controlWithinArea=function(){var t,o,r,i,s=0;this.scrollView&&(s=this.scrollView.offsetHeight-this.scrollView.clientHeight),t=e.topOffset(this.scrollbar),o=e.bottomOffset(this.scrollbar),r=e.topOffset(this.scrollView),i=e.bottomOffset(this.scrollView),this.scrollbar.style.left=t-s>r&&o<i?"":"-9999999px"},e.prototype.fitScrollBar=function(){this.fakeContent&&this.scrollbar&&this.scrollView&&(this.fakeContent.style.width=this.scrollView.scrollWidth+"px",this.scrollbar.style.width=this.scrollView.offsetWidth+"px")},e.prototype.destroy=function(){if(this.fakeContent&&this.scrollbar&&this.scrollView)try{this.scrollView.removeEventListener("scroll",this.onViewScroll),this.scrollbar.removeEventListener("scroll",this.onViewScroll),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.scrollView.style.overflowY="",this.scrollView.style.whiteSpace="",this.scrollbar.remove(),this.fakeContent.remove(),delete this.scrollbar,delete this.fakeContent,console.log("Have killed DOM elements...")}catch(e){console.error(e)}},e}();t.XStickyScroll=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportWatcher=void 0;var r=function(){function e(t,o,r,i){var s,n,l,c,a,f,h=this;void 0===r&&(r=0),void 0===i&&(i=!1),this.nodes=Array.prototype.slice.call(t),this.menuItems=Array.prototype.slice.call(o),this.topOffset=r,this.enableClickListeners=i,this.enableClickListeners&&(this.scrollIntoView=function(e){var t;if(t=e.currentTarget||e.target){var o,r;o=h.menuItems.indexOf(t),r=h.nodes[o].getBoundingClientRect().top+window.pageYOffset-h.topOffset,window.scrollTo({top:r,behavior:"smooth"})}else console.error("Could not find a target of clicked element")},this.menuItems.forEach((function(e){e.addEventListener("click",h.scrollIntoView,!1)}))),this.setActive=function(){var t;for(l=!1,c=Math.ceil(window.pageYOffset+h.topOffset),0,s=h.nodes.length,n=--s;n>=0;n--)f=h.nodes[n].getBoundingClientRect(),a=Math.floor(f.top+window.pageYOffset),t=h.menuItems[n],c>=a&&!l||0===n&&c<a?(e.classList("add",t),l=!0):e.classList("remove",t)},window.addEventListener("scroll",this.setActive,!1),window.addEventListener("resize",this.setActive,!1),this.setActive()}return e.classList=function(e,t){t.classList[e]("vw-active")},e.prototype.refresh=function(){this.setActive()},e.prototype.reconstruct=function(t,o,r,i){return void 0===r&&(r=0),void 0===i&&(i=!1),this.destroy(),new e(t,o,r,i)},e.prototype.destroy=function(){var t=this;window.removeEventListener("scroll",this.setActive,!1),window.removeEventListener("resize",this.setActive,!1),this.menuItems.forEach((function(o){o.removeEventListener("click",t.scrollIntoView,!1),e.classList("remove",o)}))},e}();t.ViewportWatcher=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9saXQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbGl0Ly4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbGl0Ly4vbGliL1hTdGlja3lTY3JvbGwudHMiLCJ3ZWJwYWNrOi8vbGl0Ly4vbGliL1ZpZXdwb3J0V2F0Y2hlci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlhTdGlja3lTY3JvbGwiLCJWaWV3cG9ydFdhdGNoZXIiLCJob3N0Iiwic2Nyb2xsQmFyQ2xhc3MiLCJ0aGlzIiwiaW5pdCIsInRvcE9mZnNldCIsImUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwYWdlWU9mZnNldCIsImJvdHRvbU9mZnNldCIsImJvdHRvbSIsImluc2VydE5vZGVBZnRlciIsIm5ld05vZGUiLCJyZWZlcmVuY2VOb2RlIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwidXBkYXRlU2Nyb2xsIiwic291cmNlIiwidGFyZ2V0Iiwic2Nyb2xsTGVmdCIsIm9uUmVzaXplIiwiZml0U2Nyb2xsQmFyIiwiY29udHJvbFdpdGhpbkFyZWEiLCJvblNjcm9sbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpZXdTY3JvbGwiLCJldiIsInNjcm9sbFZpZXciLCJzY3JvbGxiYXIiLCJzdHlsZSIsIm92ZXJmbG93WSIsIndoaXRlU3BhY2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJvdmVyZmxvd1giLCJwb3NpdGlvbiIsInpJbmRleCIsImZha2VDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJoZWlnaHQiLCJmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0IiwiZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldCIsInZpZXdUb3BPZmZzZXQiLCJ2aWV3Qm90dG9tT2Zmc2V0Iiwic2Nyb2xsQmFyV2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJsZWZ0Iiwid2lkdGgiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiZGVzdHJveSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3IiLCJub2RlcyIsIm1lbnVJdGVtcyIsImVuYWJsZUNsaWNrTGlzdGVuZXJzIiwiYXJyTGVuZ3RoIiwiY2xhc3NBZGRlZCIsImNsaWVudE9mZnNldCIsImVsT2Zmc2V0VG9wIiwiYm94IiwiQXJyYXkiLCJzbGljZSIsInNjcm9sbEludG9WaWV3IiwiY3VycmVudFRhcmdldCIsImluZGV4Iiwib2Zmc2V0IiwiaW5kZXhPZiIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJmb3JFYWNoIiwiaXRlbSIsInNldEFjdGl2ZSIsImVsZW1lbnQiLCJNYXRoIiwiY2VpbCIsImxlbmd0aCIsImZsb29yIiwiY2xhc3NMaXN0IiwiY29tbWFuZCIsInJlZnJlc2giLCJyZWNvbnN0cnVjdCJdLCJtYXBwaW5ncyI6Im9CQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQTBEZixPQXJEQUYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHLHlIQ2xGckQsV0FBUSwrRUFBQUMsaUJBQ1IsV0FBUSxpRkFBQUMsb0IscUdDRFIsaUJBMEJJLFdBQVlDLEVBQW1CQyxHQUMzQkMsS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsZUFBaUJBLEVBQ3RCQyxLQUFLQyxPQXdHYixPQTNIa0IsRUFBQUMsVUFBZCxTQUF3QkMsR0FDcEIsT0FBT0EsRUFBRUMsd0JBQXdCQyxJQUFNQyxhQUc3QixFQUFBQyxhQUFkLFNBQTJCSixHQUN2QixPQUFPQSxFQUFFQyx3QkFBd0JJLE9BQVNGLGFBR2hDLEVBQUFHLGdCQUFkLFNBQThCQyxFQUFzQkMsR0FDNUNBLEVBQWNDLFlBQVlELEVBQWNDLFdBQVdDLGFBQWFILEVBQVNDLEVBQWNHLGNBR2pGLEVBQUFDLGFBQWQsU0FBMkJDLEVBQXFCQyxHQUM1QyxPQUFPQSxFQUFPQyxXQUFhRixFQUFPRSxZQVM5QixZQUFBakIsS0FBUixzQkFFSUQsS0FBS21CLFNBQVcsV0FDWixFQUFLQyxlQUNMLEVBQUtDLHFCQUdUckIsS0FBS3NCLFNBQVcsV0FDWixFQUFLRCxvQkFDTCxFQUFLRCxnQkFHVEcsT0FBT0MsaUJBQWlCLFNBQVV4QixLQUFLc0IsVUFBVSxHQUVqREMsT0FBT0MsaUJBQWlCLFNBQVV4QixLQUFLbUIsVUFBVSxHQUVqRG5CLEtBQUt5QixhQUFlLFNBQUFDLEdBQ2hCQSxFQUFHVCxTQUFXLEVBQUtVLFdBQ2YvQixFQUFjbUIsYUFBYSxFQUFLWSxXQUF5QixFQUFLQyxXQUM1RGhDLEVBQWNtQixhQUEwQixFQUFLYSxVQUF3QixFQUFLRCxhQUlwRjNCLEtBQUsyQixXQUFhM0IsS0FBS0YsS0FDdkJFLEtBQUsyQixXQUFXRSxNQUFNQyxVQUFZLFNBQ2xDOUIsS0FBSzJCLFdBQVdFLE1BQU1FLFdBQWEsTUFDbkMvQixLQUFLNEIsVUFBWUksU0FBU0MsY0FBYyxPQUN4Q2pDLEtBQUs0QixVQUFVTSxVQUFZLG9CQUFzQmxDLEtBQUtELGVBQ3REQyxLQUFLNEIsVUFBVUMsTUFBTU0sVUFBWSxPQUNqQ25DLEtBQUs0QixVQUFVQyxNQUFNTyxTQUFXLFFBQ2hDcEMsS0FBSzRCLFVBQVVDLE1BQU1yQixPQUFTLElBQzlCUixLQUFLNEIsVUFBVUMsTUFBTVEsT0FBUyxNQUM5QnJDLEtBQUtzQyxZQUFjTixTQUFTQyxjQUFjLE9BQzFDakMsS0FBSzRCLFVBQVVXLFlBQVl2QyxLQUFLc0MsYUFDaEN0QyxLQUFLc0MsWUFBWUosVUFBWSxlQUM3QmxDLEtBQUtzQyxZQUFZVCxNQUFNVyxPQUFTLE1BQ2hDNUMsRUFBY2EsZ0JBQWdCVCxLQUFLNEIsVUFBVzVCLEtBQUsyQixZQUNuRDNCLEtBQUsyQixXQUFXSCxpQkFBaUIsU0FBVXhCLEtBQUt5QixjQUNoRHpCLEtBQUs0QixVQUFVSixpQkFBaUIsU0FBVXhCLEtBQUt5QixjQUUvQ3pCLEtBQUttQixZQUlELFlBQUFFLGtCQUFSLFdBQ0ksSUFBSW9CLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQXlCLEVBRXpCN0MsS0FBSzJCLGFBQ0xrQixFQUFpQjdDLEtBQUsyQixXQUFXbUIsYUFBZTlDLEtBQUsyQixXQUFXb0IsY0FHcEVOLEVBQXlCN0MsRUFBY00sVUFBdUJGLEtBQUs0QixXQUNuRWMsRUFBNEI5QyxFQUFjVyxhQUEwQlAsS0FBSzRCLFdBQ3pFZSxFQUFnQi9DLEVBQWNNLFVBQXVCRixLQUFLMkIsWUFDMURpQixFQUFtQmhELEVBQWNXLGFBQTBCUCxLQUFLMkIsWUFJNUQzQixLQUFLNEIsVUFBVUMsTUFBTW1CLEtBRnBCUCxFQUF5QkksRUFBaUJGLEdBQWtCRCxFQUE0QkUsRUFFN0QsR0FHQSxjQUk1QixZQUFBeEIsYUFBUixXQUNRcEIsS0FBS3NDLGFBQWV0QyxLQUFLNEIsV0FBYTVCLEtBQUsyQixhQUMzQzNCLEtBQUtzQyxZQUFZVCxNQUFNb0IsTUFBUWpELEtBQUsyQixXQUFXdUIsWUFBYyxLQUM3RGxELEtBQUs0QixVQUFVQyxNQUFNb0IsTUFBUWpELEtBQUsyQixXQUFXd0IsWUFBYyxPQUk1RCxZQUFBQyxRQUFQLFdBRUksR0FBSXBELEtBQUtzQyxhQUFldEMsS0FBSzRCLFdBQWE1QixLQUFLMkIsV0FFM0MsSUFFSTNCLEtBQUsyQixXQUFXMEIsb0JBQW9CLFNBQVVyRCxLQUFLeUIsY0FFbkR6QixLQUFLNEIsVUFBVXlCLG9CQUFvQixTQUFVckQsS0FBS3lCLGNBRWxERixPQUFPOEIsb0JBQW9CLFNBQVVyRCxLQUFLc0IsVUFFMUNDLE9BQU84QixvQkFBb0IsU0FBVXJELEtBQUttQixVQUMxQ25CLEtBQUsyQixXQUFXRSxNQUFNQyxVQUFZLEdBQ2xDOUIsS0FBSzJCLFdBQVdFLE1BQU1FLFdBQWEsR0FDbkMvQixLQUFLNEIsVUFBVTBCLFNBQ2Z0RCxLQUFLc0MsWUFBWWdCLGdCQUNWdEQsS0FBSzRCLGlCQUNMNUIsS0FBS3NDLFlBQ1ppQixRQUFRQyxJQUFJLCtCQUNkLE1BQU9DLEdBQ0xGLFFBQVFHLE1BQU1ELEtBSTlCLEVBcklBLEdBQWEsRUFBQTdELGlCLHVHQ0FiLGlCQWNJLFdBQVkrRCxFQUFrQ0MsRUFBc0MxRCxFQUF1QjJELEdBQTNHLElBQ1FDLEVBRUFsRyxFQUNBbUcsRUFDQUMsRUFDQUMsRUFDQUMsRUFQUixZQUFvRixJQUFBaEUsTUFBQSxRQUF1QixJQUFBMkQsT0FBQSxHQVN2RzdELEtBQUsyRCxNQUFRUSxNQUFNM0UsVUFBVTRFLE1BQU1yRyxLQUFLNEYsR0FDeEMzRCxLQUFLNEQsVUFBWU8sTUFBTTNFLFVBQVU0RSxNQUFNckcsS0FBSzZGLEdBQzVDNUQsS0FBS0UsVUFBWUEsRUFDakJGLEtBQUs2RCxxQkFBdUJBLEVBRXhCN0QsS0FBSzZELHVCQUVMN0QsS0FBS3FFLGVBQWlCLFNBQUMzQyxHQUNuQixJQUFJVCxFQUdKLEdBREFBLEVBQVNTLEVBQUc0QyxlQUFpQjVDLEVBQUdULE9BQ3BCLENBQ1IsSUFBSXNELEVBRUFDLEVBR0pELEVBQVEsRUFBS1gsVUFBVWEsUUFBUXhELEdBRy9CdUQsRUFGVSxFQUFLYixNQUFNWSxHQUVKbkUsd0JBQXdCQyxJQUFNa0IsT0FBT2pCLFlBQWMsRUFBS0osVUFDekVxQixPQUFPbUQsU0FBUyxDQUFDckUsSUFBS21FLEVBQVFHLFNBQVUsZ0JBR3hDcEIsUUFBUUcsTUFBTSwrQ0FJdEIxRCxLQUFLNEQsVUFBVWdCLFNBQVEsU0FBQ0MsR0FFcEJBLEVBQUtyRCxpQkFBaUIsUUFBUyxFQUFLNkMsZ0JBQWdCLE9BSTVEckUsS0FBSzhFLFVBQVksV0FDYixJQUFJQyxFQVFKLElBTkFoQixHQUFhLEVBQ2JDLEVBQWVnQixLQUFLQyxLQUFLMUQsT0FBT2pCLFlBQWMsRUFBS0osV0FDNUMsRUFDUDRELEVBQVksRUFBS0gsTUFBTXVCLE9BQ3ZCdEgsSUFBTWtHLEVBRUVsRyxHQUpELEVBSVlBLElBRWZzRyxFQUFNLEVBQUtQLE1BQU0vRixHQUFHd0Msd0JBQ3BCNkQsRUFBY2UsS0FBS0csTUFBTWpCLEVBQUk3RCxJQUFNa0IsT0FBT2pCLGFBQzFDeUUsRUFBVSxFQUFLbkIsVUFBVWhHLEdBRXJCb0csR0FBZ0JDLElBQWdCRixHQUFvQixJQUFObkcsR0FBV29HLEVBQWVDLEdBRXhFcEUsRUFBZ0J1RixVQUFVLE1BQU9MLEdBQ2pDaEIsR0FBYSxHQUdibEUsRUFBZ0J1RixVQUFVLFNBQVVMLElBTWhEeEQsT0FBT0MsaUJBQWlCLFNBQVV4QixLQUFLOEUsV0FBVyxHQUNsRHZELE9BQU9DLGlCQUFpQixTQUFVeEIsS0FBSzhFLFdBQVcsR0FFbEQ5RSxLQUFLOEUsWUFzQmIsT0FwR21CLEVBQUFNLFVBQWYsU0FBeUJDLEVBQWlCUixHQUV0Q0EsRUFBSSxVQUFjUSxHQUFTLGNBK0V4QixZQUFBQyxRQUFQLFdBRUl0RixLQUFLOEUsYUFHRixZQUFBUyxZQUFQLFNBQW1CNUIsRUFBa0NDLEVBQXNDMUQsRUFBdUIyRCxHQUU5RyxZQUZ1RixJQUFBM0QsTUFBQSxRQUF1QixJQUFBMkQsT0FBQSxHQUM5RzdELEtBQUtvRCxVQUNFLElBQUl2RCxFQUFnQjhELEVBQU9DLEVBQVcxRCxFQUFXMkQsSUFHckQsWUFBQVQsUUFBUCxzQkFDSTdCLE9BQU84QixvQkFBb0IsU0FBVXJELEtBQUs4RSxXQUFXLEdBQ3JEdkQsT0FBTzhCLG9CQUFvQixTQUFVckQsS0FBSzhFLFdBQVcsR0FDckQ5RSxLQUFLNEQsVUFBVWdCLFNBQVEsU0FBQ0MsR0FFcEJBLEVBQUt4QixvQkFBb0IsUUFBUyxFQUFLZ0IsZ0JBQWdCLEdBQ3ZEeEUsRUFBZ0J1RixVQUFVLFNBQVVQLE9BR2hELEVBN0dBLEdBQWEsRUFBQWhGIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IHtYU3RpY2t5U2Nyb2xsfSBmcm9tIFwiLi9saWIvWFN0aWNreVNjcm9sbFwiO1xuZXhwb3J0IHtWaWV3cG9ydFdhdGNoZXJ9IGZyb20gXCIuL2xpYi9WaWV3cG9ydFdhdGNoZXJcIjtcbiIsImV4cG9ydCBjbGFzcyBYU3RpY2t5U2Nyb2xsIHtcbiAgICBob3N0OiBIVE1MRWxlbWVudDtcbiAgICBzY3JvbGxCYXJDbGFzcz86IFN0cmluZztcbiAgICBzY3JvbGxWaWV3OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgICBzY3JvbGxiYXI6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICAgIGZha2VDb250ZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgICBvblZpZXdTY3JvbGw6IEV2ZW50TGlzdGVuZXIgfCB1bmRlZmluZWQ7XG4gICAgb25TY3JvbGw6IEZ1bmN0aW9uIHwgRXZlbnRMaXN0ZW5lciB8IHVuZGVmaW5lZDtcbiAgICBvblJlc2l6ZTogRnVuY3Rpb24gfCBFdmVudExpc3RlbmVyIHwgdW5kZWZpbmVkO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBwdWJsaWMgc3RhdGljIHRvcE9mZnNldChlOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHBhZ2VZT2Zmc2V0O1xuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcHVibGljIHN0YXRpYyBib3R0b21PZmZzZXQoZTogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gKyBwYWdlWU9mZnNldDtcbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHB1YmxpYyBzdGF0aWMgaW5zZXJ0Tm9kZUFmdGVyKG5ld05vZGU6IEhUTUxFbGVtZW50LCByZWZlcmVuY2VOb2RlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBpZiAocmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlKSByZWZlcmVuY2VOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5ld05vZGUsIHJlZmVyZW5jZU5vZGUubmV4dFNpYmxpbmcpO1xuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcHVibGljIHN0YXRpYyB1cGRhdGVTY3JvbGwoc291cmNlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0YXJnZXQuc2Nyb2xsTGVmdCA9IHNvdXJjZS5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3RydWN0b3IoaG9zdDogSFRNTEVsZW1lbnQsIHNjcm9sbEJhckNsYXNzOiBTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJDbGFzcyA9IHNjcm9sbEJhckNsYXNzO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHByaXZhdGUgaW5pdCgpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLm9uUmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5maXRTY3JvbGxCYXIoKTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbFdpdGhpbkFyZWEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLm9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sV2l0aGluQXJlYSgpO1xuICAgICAgICAgICAgdGhpcy5maXRTY3JvbGxCYXIoKTsgLy8gc29tZXRpbWVzIG9wdGlvbmFsLiBOZWVkZWQgd2hlbiBESVYgaXMgbm90IGRpc3BsYXllZCB5ZXRcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsLCBmYWxzZSk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSwgZmFsc2UpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMub25WaWV3U2Nyb2xsID0gZXYgPT4ge1xuICAgICAgICAgICAgZXYudGFyZ2V0ID09PSB0aGlzLnNjcm9sbFZpZXcgP1xuICAgICAgICAgICAgICAgIFhTdGlja3lTY3JvbGwudXBkYXRlU2Nyb2xsKHRoaXMuc2Nyb2xsVmlldywgPEhUTUxFbGVtZW50PnRoaXMuc2Nyb2xsYmFyKVxuICAgICAgICAgICAgICAgIDogWFN0aWNreVNjcm9sbC51cGRhdGVTY3JvbGwoPEhUTUxFbGVtZW50PnRoaXMuc2Nyb2xsYmFyLCA8SFRNTEVsZW1lbnQ+dGhpcy5zY3JvbGxWaWV3KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5ob3N0KTtcbiAgICAgICAgLy8gdGhpcy5zY3JvbGxWaWV3ID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuaG9zdC5xdWVyeVNlbGVjdG9yKHRoaXMuc2VsZWN0b3IpIDogdGhpcy5ob3N0O1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcgPSB0aGlzLmhvc3Q7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJztcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5jbGFzc05hbWUgPSAnc3RpY2t5LXNjcm9sbGJhciAnICsgdGhpcy5zY3JvbGxCYXJDbGFzcztcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUub3ZlcmZsb3dYID0gJ2F1dG8nO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLnN0eWxlLmJvdHRvbSA9ICcwJztcbiAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUuekluZGV4ID0gJzk5OSc7XG4gICAgICAgIHRoaXMuZmFrZUNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNjcm9sbGJhci5hcHBlbmRDaGlsZCh0aGlzLmZha2VDb250ZW50KTtcbiAgICAgICAgdGhpcy5mYWtlQ29udGVudC5jbGFzc05hbWUgPSAnZmFrZS1jb250ZW50JztcbiAgICAgICAgdGhpcy5mYWtlQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnMXB4JztcbiAgICAgICAgWFN0aWNreVNjcm9sbC5pbnNlcnROb2RlQWZ0ZXIodGhpcy5zY3JvbGxiYXIsIHRoaXMuc2Nyb2xsVmlldyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uVmlld1Njcm9sbCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFyLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuICAgIC8vIE1heSBzY3JvbGxiYXIgc3RheSBpbnNpZGUgdGhlIHZpZXcgb25seVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBwcml2YXRlIGNvbnRyb2xXaXRoaW5BcmVhKCk6IHZvaWQge1xuICAgICAgICBsZXQgZmFrZVNjcm9sbGJhclRvcE9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgZmFrZVNjcm9sbGJhckJvdHRvbU9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgdmlld1RvcE9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgdmlld0JvdHRvbU9mZnNldDogbnVtYmVyLFxuICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg6IG51bWJlciA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSB0aGlzLnNjcm9sbFZpZXcub2Zmc2V0SGVpZ2h0IC0gdGhpcy5zY3JvbGxWaWV3LmNsaWVudEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZha2VTY3JvbGxiYXJUb3BPZmZzZXQgPSBYU3RpY2t5U2Nyb2xsLnRvcE9mZnNldCg8SFRNTEVsZW1lbnQ+dGhpcy5zY3JvbGxiYXIpO1xuICAgICAgICBmYWtlU2Nyb2xsYmFyQm90dG9tT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC5ib3R0b21PZmZzZXQoPEhUTUxFbGVtZW50PnRoaXMuc2Nyb2xsYmFyKTtcbiAgICAgICAgdmlld1RvcE9mZnNldCA9IFhTdGlja3lTY3JvbGwudG9wT2Zmc2V0KDxIVE1MRWxlbWVudD50aGlzLnNjcm9sbFZpZXcpO1xuICAgICAgICB2aWV3Qm90dG9tT2Zmc2V0ID0gWFN0aWNreVNjcm9sbC5ib3R0b21PZmZzZXQoPEhUTUxFbGVtZW50PnRoaXMuc2Nyb2xsVmlldyk7XG5cbiAgICAgICAgaWYgKChmYWtlU2Nyb2xsYmFyVG9wT2Zmc2V0IC0gc2Nyb2xsQmFyV2lkdGggPiB2aWV3VG9wT2Zmc2V0KSAmJiBmYWtlU2Nyb2xsYmFyQm90dG9tT2Zmc2V0IDwgdmlld0JvdHRvbU9mZnNldCkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUubGVmdCA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIuc3R5bGUubGVmdCA9ICctOTk5OTk5OXB4JztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcHJpdmF0ZSBmaXRTY3JvbGxCYXIoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmZha2VDb250ZW50ICYmIHRoaXMuc2Nyb2xsYmFyICYmIHRoaXMuc2Nyb2xsVmlldykge1xuICAgICAgICAgICAgdGhpcy5mYWtlQ29udGVudC5zdHlsZS53aWR0aCA9IHRoaXMuc2Nyb2xsVmlldy5zY3JvbGxXaWR0aCArICdweCc7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGJhci5zdHlsZS53aWR0aCA9IHRoaXMuc2Nyb2xsVmlldy5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHB1YmxpYyBkZXN0cm95KCkge1xuICAgICAgICAvLyBLaWxsIERPTSBlbGVtZW50c1xuICAgICAgICBpZiAodGhpcy5mYWtlQ29udGVudCAmJiB0aGlzLnNjcm9sbGJhciAmJiB0aGlzLnNjcm9sbFZpZXcpIHtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25WaWV3U2Nyb2xsKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblZpZXdTY3JvbGwpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LnN0eWxlLm92ZXJmbG93WSA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5zdHlsZS53aGl0ZVNwYWNlID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlQ29udGVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zY3JvbGxiYXI7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmFrZUNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYXZlIGtpbGxlZCBET00gZWxlbWVudHMuLi5cIik7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVmlld3BvcnRXYXRjaGVyIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG5vZGVzOiBBcnJheTxIVE1MRWxlbWVudCB8IE5vZGU+O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbWVudUl0ZW1zOiBBcnJheTxIVE1MRWxlbWVudCB8IE5vZGU+O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc2V0QWN0aXZlOiBFdmVudExpc3RlbmVyO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNjcm9sbEludG9WaWV3OiBFdmVudExpc3RlbmVyIHwgbnVsbDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVuYWJsZUNsaWNrTGlzdGVuZXJzOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdG9wT2Zmc2V0OiBudW1iZXI7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjbGFzc0xpc3QoY29tbWFuZDogc3RyaW5nLCBpdGVtOiBIVE1MRWxlbWVudCB8IE5vZGUpOiB2b2lkIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpdGVtW1wiY2xhc3NMaXN0XCJdW2NvbW1hbmRdKFwidnctYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKG5vZGVzOiBIVE1MQ29sbGVjdGlvbiB8IE5vZGVMaXN0LCBtZW51SXRlbXM6IEhUTUxDb2xsZWN0aW9uIHwgTm9kZUxpc3QsIHRvcE9mZnNldDogbnVtYmVyID0gMCwgZW5hYmxlQ2xpY2tMaXN0ZW5lcnM6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBsZXQgYXJyTGVuZ3RoOiBudW1iZXIsXG4gICAgICAgICAgICB6ZXJvOiBudW1iZXIsXG4gICAgICAgICAgICBpOiBudW1iZXIsXG4gICAgICAgICAgICBjbGFzc0FkZGVkOiBib29sZWFuLFxuICAgICAgICAgICAgY2xpZW50T2Zmc2V0OiBudW1iZXIsXG4gICAgICAgICAgICBlbE9mZnNldFRvcDogbnVtYmVyLFxuICAgICAgICAgICAgYm94OiBhbnk7XG5cbiAgICAgICAgdGhpcy5ub2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVzKTtcbiAgICAgICAgdGhpcy5tZW51SXRlbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChtZW51SXRlbXMpO1xuICAgICAgICB0aGlzLnRvcE9mZnNldCA9IHRvcE9mZnNldDtcbiAgICAgICAgdGhpcy5lbmFibGVDbGlja0xpc3RlbmVycyA9IGVuYWJsZUNsaWNrTGlzdGVuZXJzO1xuXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZUNsaWNrTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAvLyBDbGljayBsaXN0ZW5lciBvbiBtZW51IGl0ZW1cbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcgPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldDtcblxuICAgICAgICAgICAgICAgIHRhcmdldCA9IGV2LmN1cnJlbnRUYXJnZXQgfHwgZXYudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBFbGVtZW50IHwgTm9kZSB8IEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiBudW1iZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMubWVudUl0ZW1zLmluZGV4T2YodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMubm9kZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0IC0gdGhpcy50b3BPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7dG9wOiBvZmZzZXQsIGJlaGF2aW9yOiAnc21vb3RoJ30pO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBmaW5kIGEgdGFyZ2V0IG9mIGNsaWNrZWQgZWxlbWVudFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLm1lbnVJdGVtcy5mb3JFYWNoKChpdGVtOiBIVE1MRWxlbWVudCB8IE5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxJbnRvVmlldywgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldEFjdGl2ZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50OiBOb2RlIHwgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGNsYXNzQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNsaWVudE9mZnNldCA9IE1hdGguY2VpbCh3aW5kb3cucGFnZVlPZmZzZXQgKyB0aGlzLnRvcE9mZnNldCk7XG4gICAgICAgICAgICB6ZXJvID0gMDtcbiAgICAgICAgICAgIGFyckxlbmd0aCA9IHRoaXMubm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA9IC0tYXJyTGVuZ3RoO1xuICAgICAgICAgICAgLy8gZm9yIGxvb3Agc3RhcnRcbiAgICAgICAgICAgIGZvciAoaTsgaSA+PSB6ZXJvOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgYm94ID0gdGhpcy5ub2Rlc1tpXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBlbE9mZnNldFRvcCA9IE1hdGguZmxvb3IoYm94LnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMubWVudUl0ZW1zW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNsaWVudE9mZnNldCA+PSBlbE9mZnNldFRvcCAmJiAhY2xhc3NBZGRlZCB8fCBpID09PSAwICYmIGNsaWVudE9mZnNldCA8IGVsT2Zmc2V0VG9wKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgVmlld3BvcnRXYXRjaGVyLmNsYXNzTGlzdChcImFkZFwiLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NBZGRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBWaWV3cG9ydFdhdGNoZXIuY2xhc3NMaXN0KFwicmVtb3ZlXCIsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZvciBsb29wIGVuZFxuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNldEFjdGl2ZSwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zZXRBY3RpdmUsIGZhbHNlKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnNldEFjdGl2ZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWZyZXNoKCk6IHZvaWQge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY29uc3RydWN0KG5vZGVzOiBIVE1MQ29sbGVjdGlvbiB8IE5vZGVMaXN0LCBtZW51SXRlbXM6IEhUTUxDb2xsZWN0aW9uIHwgTm9kZUxpc3QsIHRvcE9mZnNldDogbnVtYmVyID0gMCwgZW5hYmxlQ2xpY2tMaXN0ZW5lcnM6IGJvb2xlYW4gPSBmYWxzZSk6IFZpZXdwb3J0V2F0Y2hlciB7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdwb3J0V2F0Y2hlcihub2RlcywgbWVudUl0ZW1zLCB0b3BPZmZzZXQsIGVuYWJsZUNsaWNrTGlzdGVuZXJzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2V0QWN0aXZlLCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnNldEFjdGl2ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLm1lbnVJdGVtcy5mb3JFYWNoKChpdGVtOiBIVE1MRWxlbWVudCB8IE5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGl0ZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2Nyb2xsSW50b1ZpZXcsIGZhbHNlKTtcbiAgICAgICAgICAgIFZpZXdwb3J0V2F0Y2hlci5jbGFzc0xpc3QoXCJyZW1vdmVcIiwgaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIifQ==